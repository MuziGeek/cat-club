# 开发计划

## 总体时间线

| 阶段 | 周期 | 目标 |
|------|------|------|
| Phase 1: MVP | 4-6 周 | 核心功能可用，内部测试 |
| Phase 2: 核心功能 | 6-8 周 | 完整养成系统，公开测试 |
| Phase 3: 社交功能 | 4-6 周 | 社区上线，正式发布 |

**总预计周期：14-20 周**

---

## Phase 1: MVP（4-6 周）

### Week 1: 项目初始化

**任务清单：**
- [ ] Flutter 项目创建与配置
- [ ] 目录结构搭建
- [ ] 依赖安装与配置
- [ ] Firebase 项目创建
- [ ] Git 仓库初始化
- [ ] CI/CD 基础配置

**交付物：**
- 可运行的空白 Flutter 项目
- Firebase 连接成功
- 基础路由框架

### Week 2: 用户认证 & 宠物创建

**任务清单：**
- [ ] 登录页面 UI
- [ ] 注册页面 UI
- [ ] Firebase Auth 集成
- [ ] 用户 Provider 实现
- [ ] 宠物创建页面（预设形象选择）
- [ ] Pet Model 定义

**交付物：**
- 完整登录/注册流程
- 可选择预设形象创建宠物

### Week 3: 宠物房间基础

**任务清单：**
- [ ] 宠物房间页面布局
- [ ] 宠物展示区域
- [ ] 状态条 UI 组件
- [ ] 底部导航栏
- [ ] Pet Provider 实现
- [ ] Firestore 宠物数据读写

**交付物：**
- 宠物房间页面可展示宠物
- 状态条正确显示

### Week 4: 基础互动

**任务清单：**
- [ ] 喂食功能实现
- [ ] 抚摸功能实现
- [ ] 互动动画（Lottie 基础动画）
- [ ] 状态更新逻辑
- [ ] 互动 Provider 实现
- [ ] 经验值/等级计算

**交付物：**
- 可进行喂食和抚摸
- 状态值正确变化
- 基础动画效果

### Week 5: AI 生成集成

**任务清单：**
- [ ] 照片上传功能
- [ ] 图片裁剪/预处理
- [ ] Replicate API 集成
- [ ] AI 生成服务封装
- [ ] 形象选择 UI
- [ ] Cloud Function 部署

**交付物：**
- 上传照片可生成卡通形象
- 用户可从多个形象中选择

### Week 6: 测试与优化

**任务清单：**
- [ ] 单元测试编写
- [ ] Widget 测试编写
- [ ] Bug 修复
- [ ] 性能优化
- [ ] UI 打磨
- [ ] 内部测试分发

**交付物：**
- MVP 版本内部发布
- 测试覆盖率 > 60%

---

## Phase 2: 核心功能（6-8 周）

### Week 7-8: 成长系统

**任务清单：**
- [ ] 完整等级系统
- [ ] 经验值计算优化
- [ ] 亲密度系统
- [ ] 状态衰减机制（含离线计算）
- [ ] 每日签到功能
- [ ] 签到奖励系统

### Week 9-10: 成就系统

**任务清单：**
- [ ] 成就数据模型
- [ ] 成就解锁逻辑
- [ ] 成就展示页面
- [ ] 成就解锁动效
- [ ] 奖励发放系统
- [ ] 15+ 成就定义

### Week 11-12: 换装系统

**任务清单：**
- [ ] 道具数据模型
- [ ] 道具商店页面
- [ ] 换装界面
- [ ] 装备渲染系统
- [ ] 购买/装备逻辑
- [ ] 初始道具包

### Week 13-14: 多宠物 & 纪念模式

**任务清单：**
- [ ] 多宠物支持
- [ ] 宠物切换功能
- [ ] 纪念模式 UI 主题
- [ ] 回忆相册功能
- [ ] 纪念日提醒
- [ ] 星座化特效

---

## Phase 3: 社交功能（4-6 周）

### Week 15-16: 社区基础

**任务清单：**
- [ ] 社区动态流页面
- [ ] 发帖功能
- [ ] 图片上传
- [ ] 动态详情页
- [ ] 无限滚动分页

### Week 17-18: 互动功能

**任务清单：**
- [ ] 点赞功能
- [ ] 评论功能
- [ ] 用户关注系统
- [ ] 个人主页
- [ ] 通知系统

### Week 19-20: 分享与发布

**任务清单：**
- [ ] 分享卡片生成
- [ ] 微信/微博分享
- [ ] 最终测试
- [ ] 性能优化
- [ ] 应用商店准备
- [ ] 正式发布

---

## 里程碑

| 里程碑 | 日期 | 标志 |
|--------|------|------|
| M1: MVP 完成 | Week 6 | 核心功能可用 |
| M2: Alpha 版本 | Week 10 | 成长系统完成 |
| M3: Beta 版本 | Week 14 | 养成系统完整 |
| M4: RC 版本 | Week 18 | 社区功能完成 |
| M5: 正式发布 | Week 20 | 上线应用商店 |

---

## 风险管理

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|----------|
| AI 生成质量不稳定 | 中 | 高 | 多模型备选，人工审核机制 |
| Firebase 费用超预期 | 中 | 中 | 设置预算警报，优化查询 |
| 动画性能问题 | 低 | 中 | Rive 分层，RepaintBoundary 隔离 |
| 审核被拒 | 低 | 高 | 提前了解政策，预留修改时间 |

---

## 资源需求

### 人力资源

| 角色 | 数量 | 职责 |
|------|------|------|
| Flutter 开发 | 1-2 | 前端开发 |
| 后端/运维 | 0.5 | Firebase 配置与维护 |
| UI/UX 设计 | 0.5 | 界面设计，动画设计 |
| 测试 | 0.5 | 功能测试，用户测试 |

### 外部服务成本预估（月）

| 服务 | 预估费用 |
|------|----------|
| Firebase (Blaze Plan) | $50-200 |
| Replicate API | $50-100 |
| Apple Developer | $99/年 |
| Google Play | $25 一次性 |
